<dom-module id="labrad-manager">
  <style>
    :host {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th {
      padding: 4px;
    }
    td {
      padding: 4px;
    }
    thead tr {
      background-color: #440088;
      color: white;
    }
    tbody tr:nth-child(odd) {
      background-color: #EEEEEE;
    }
    tbody tr:nth-child(odd):hover {
      background-color: #F6F699;
    }
    tbody tr:nth-child(even):hover {
      background-color: #FFFFAA;
    }
    .close {
      text-align: center;
    }
    .close a:hover {
      color: #f00;
    }
  </style>
  <template>
    <table>
      <thead>
        <tr>
          <th>Id</th>
          <th>Type</th>
          <th>Name</th>
          <th>Server Reqs</th>
          <th>Server Reps</th>
          <th>Client Reqs</th>
          <th>Client Reps</th>
          <th>Messages Sent</th>
          <th>Messages Recv</th>
          <th class='close'>Close</th>
        </tr>
      </thead>
      <tbody>
        <template is="dom-repeat" items="{{connections}}">
          <tr>
            <td><span>{{item.id}}</span></td>
            <td>
              <template is="dom-if" if="{{item.server}}">
                <span>server</span>
              </template>
              <template is="dom-if" if="{{!item.server}}">
                <span>client</span>
              </template>
            </td>
            <td>
              <template is="dom-if" if="{{item.server}}">
                <a is="app-link" path="{{item.url}}" href="{{item.url}}">
                  <span class="paper-font-body1">{{item.name}}</span>
                </a>
              </template>
              <template is="dom-if" if="{{!item.server}}">
                <span class="paper-font-body1">{{item.name}}</span>
              </template>
            </td>
            <td><span>{{item.serverReqCount}}</span></td><!-- TODO: only if server, else '-' -->
            <td><span>{{item.serverRespCount}}</span></td>
            <td><span>{{item.clientReqCount}}</span></td><!-- TODO: only if active, else '-' -->
            <td><span>{{item.clientRespCount}}</span></td>
            <td><span>{{item.msgSendCount}}</span></td>
            <td><span>{{item.msgRecvCount}}</span></td>
            <td class='close'><span><a href='#close{{item.id}}' conn-id='{{item.id}}' on-click='closeConnection'>Ã—</span></td>
          </tr>
        </template>
      </tbody>
    </table>
  </template>
</dom-module>
